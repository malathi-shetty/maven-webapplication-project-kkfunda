pipeline {
    agent any

tools{
    maven "maven-3.9.6"
}
    stages {
        stage('Git Checkout') {
            steps {
                git branch: 'development', url: 'https://github.com/malathi-shetty/maven-webapplication-project-kkfunda.git'
            }
        }
        stage('build'){
            steps{
                sh "mvn clean package"
            }
        }
        stage('SQ Report'){
        steps{
            sh "mvn sonar:sonar"
        }
        }
stage('upload into nexus'){
        steps{
            sh "mvn deploy"
        }
        }

stage('tomcat deploy'){
        steps{
            sh """
        curl -u kk:password \
        --upload-file /var/lib/jenkins/workspace/Jio-Declarative-PL-dev/target/maven-web-application.war \
        "http://65.0.61.29:8080/manager/text/deploy?path=/maven-web-application&update=true"
      """
        }
        }


    } // stages closed
} // pipeline closed
